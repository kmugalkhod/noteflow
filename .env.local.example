# ============================================
# NoteFlow Environment Variables
# ============================================
#
# Copy this file to .env.local and fill in your values
# Never commit .env.local to version control!
#
# Quick Start:
# 1. Set up Convex: https://dashboard.convex.dev
# 2. Set up Clerk: https://dashboard.clerk.com
# 3. Copy this file: cp .env.local.example .env.local
# 4. Fill in your values below
# 5. Run: npm run dev
#
# ============================================

# --------------------------------------------
# Convex Backend
# --------------------------------------------
# Get these from: https://dashboard.convex.dev
#
# OPTION 1: Convex Cloud (Recommended for Production)
# CONVEX_DEPLOYMENT: Your deployment URL (e.g., "dev:romantic-panda-123")
# NEXT_PUBLIC_CONVEX_URL: Public URL for client-side (e.g., "https://romantic-panda-123.convex.cloud")
#
# Development: Use dev deployment (e.g., dev:romantic-panda-123)
# Production: Use prod deployment (e.g., prod:romantic-panda-123)
#
CONVEX_DEPLOYMENT=
NEXT_PUBLIC_CONVEX_URL=

# OPTION 2: Self-Hosted Convex (Development Only)
# Uncomment these if running Convex locally:
# CONVEX_SELF_HOSTED_URL=http://127.0.0.1:3210
# CONVEX_SELF_HOSTED_ADMIN_KEY=your-admin-key-here
# NEXT_PUBLIC_CONVEX_URL=http://127.0.0.1:3210
#
# Note: For production deployment, you MUST use Convex Cloud (Option 1)

# --------------------------------------------
# Clerk Authentication
# --------------------------------------------
# Get these from: https://dashboard.clerk.com
#
# Create a new application and copy the keys from:
# Dashboard > API Keys > Quick Copy
#
# NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: Public key (safe for client-side)
# CLERK_SECRET_KEY: Secret key (server-side only, never expose!)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=

# Clerk URLs (optional - for custom auth paths)
# These match our app routes in app/(auth)/
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/login
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/register
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/workspace
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/workspace

# --------------------------------------------
# Security Configuration
# --------------------------------------------
# Admin Bootstrap Secret (for creating first superadmin)
# IMPORTANT: Generate a cryptographically random secret
# This is used ONCE during initial setup to create the first superadmin
# After that, use the grantAdminRole mutation to add more admins
#
# Generate secure secret:
# openssl rand -base64 32  (macOS/Linux)
# or node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
#
# See: docs/ADMIN_SETUP.md for complete setup guide
ADMIN_BOOTSTRAP_SECRET=change-me-to-random-secret-in-production

# --------------------------------------------
# Application Configuration
# --------------------------------------------
# NEXT_PUBLIC_APP_URL: Your app's public URL
# Used for: Share links, SEO metadata, email links, social sharing
#
# IMPORTANT: Required for share links to work correctly!
# - Development: http://localhost:3000
# - Production: https://your-app.vercel.app (or your custom domain)
#
# Example values:
# - http://localhost:3000 (local development)
# - https://noteflow.vercel.app (Vercel deployment)
# - https://noteflow.com (custom domain)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# --------------------------------------------
# Optional: Analytics & Monitoring
# --------------------------------------------
# Add your analytics providers here
# NEXT_PUBLIC_GOOGLE_ANALYTICS=
# NEXT_PUBLIC_POSTHOG_KEY=
# SENTRY_DSN=

# --------------------------------------------
# Optional: Email Service (Future)
# --------------------------------------------
# For sending notifications, password resets, etc.
# RESEND_API_KEY=
# EMAIL_FROM=noreply@noteflow.com

# --------------------------------------------
# Development Tools
# --------------------------------------------
# NODE_ENV is automatically set by Next.js
# development, production, or test
# NODE_ENV=development

# Enable verbose logging in development
# NEXT_PUBLIC_DEBUG=true

# ============================================
# Production Environment Variables
# ============================================
#
# Required for Production Deployment:
# ✓ CONVEX_DEPLOYMENT (prod:xxx from `npx convex deploy --prod`)
# ✓ NEXT_PUBLIC_CONVEX_URL (https://xxx.convex.cloud)
# ✓ NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY (production key)
# ✓ CLERK_SECRET_KEY (production key)
# ✓ NEXT_PUBLIC_APP_URL (your production domain)
#
# ============================================
# Deployment Notes
# ============================================
#
# Vercel Deployment:
# 1. Run: npx convex deploy --prod (get production Convex URLs)
# 2. Add all environment variables in Vercel dashboard
# 3. Ensure CONVEX_DEPLOYMENT is set to prod:xxx (NOT dev:xxx)
# 4. Update Clerk dashboard with production domain
# 5. Redeploy Vercel after setting environment variables
#
# Convex Cloud Setup:
# 1. Sign up: https://dashboard.convex.dev
# 2. Create new project or use existing
# 3. Run: npx convex deploy --prod
# 4. Save CONVEX_DEPLOYMENT and NEXT_PUBLIC_CONVEX_URL from output
# 5. Update ADMIN_EMAILS in convex/adminAudit.ts before deploying
#
# Clerk Production Setup:
# 1. Create production application: https://dashboard.clerk.com
# 2. Copy production API keys
# 3. Add authorized domains (your Vercel URL or custom domain)
# 4. Update redirect URLs to match production domain
#
# Security Checklist:
# - Never commit .env.local to git (.gitignore includes it)
# - Use different keys for dev/staging/prod
# - Rotate secret keys regularly
# - Keep Clerk secret key secure (server-side only)
# - Monitor Convex audit logs monthly
# - Review ADMIN_EMAILS list in convex/adminAudit.ts
#
# For more info:
# - Convex Setup: https://docs.convex.dev/quickstart
# - Clerk Setup: https://clerk.com/docs/quickstart
# - Deployment: docs/DEPLOYMENT_RUNBOOK.md
# - Security: SECURITY.md
# ============================================
